<!doctype html>
<html>
<style>


div.top {
    float: top;
    min-width: 100%;
    height: 20%;
    background-color: powderblue;
    text-align: center;
    font-size: 50px;
}

div.col_left {
    width: 50%;
/*    height: 20%;*/
    float: left;
    font-size: 60px;
}

div.col_right {
	font-size: 40px;
    width: 50%;
/*    height: 40%;*/
    float: left;
}

div.current{
    height:40%;
    width:100%;
    text-align:center;
    padding: 20px 0;
}

</style>
<body>

<div class="top" id="house_temp">Temperature and Humidity is: waiting update . . . </div>
<div class="top" id="mech_status">Heater status is: Waiting update . . .</div>
  <div class="col_left">
    <div></div>
    <div class="current">Set point</div>
    <div class="current" id="new_temp">71</div>
  <!--   <div><input type="checkbox" id="switch"> Enable/Disable</div> -->
  </div>
  <div class="col_right">
    <div><button style="height:50%;width:100%;font-size: 80px" onclick="increasetemp()">Increase</button></div>
    <div><button style="height:50%;width:100%;font-size: 80px" onclick="decreasetemp()">Decrease</button></div>
  </div

    <ul id="messages"></ul>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
var socket = io();
console.log('socket loaded');

socket.on('broadcast',function(data) {
	console.log(data);
	if (data.boiler) {var boiler="ON"} else {var boiler="OFF"}
		document.getElementById("house_temp").innerHTML = 
		'Temperature is: ' + data.temp + '  Humidity is: ' + data.humid.toFixed(1);

		document.getElementById("mech_status").innerHTML =	'Heater is: ' + boiler;
		document.getElementById("new_temp").innerHTML =	data.setpoint;
	});

function increasetemp() {
    var new_temp = Number(document.getElementById("new_temp").innerHTML);
    document.getElementById("new_temp").innerHTML= new_temp+1;
    console.log(document.getElementById("new_temp").innerHTML)
	socket.emit("new_temp", Number(document.getElementById("new_temp").innerHTML));
	console.log('emiting socket data')	
}

function decreasetemp() {
    var new_temp = Number(document.getElementById("new_temp").innerHTML);
    document.getElementById("new_temp").innerHTML= new_temp-1;
    console.log(document.getElementById("new_temp").innerHTML)
	socket.emit("new_temp", Number(document.getElementById("new_temp").innerHTML));
	console.log('emiting socket data')
}


</script>
  </body>
</html>